<!DOCTYPE html>
<HTML lang="en">
	<HEAD>
		<META CHARSET="UTF-8">
		<META name="viewport" content="width=device-width, initial-scale=1.0">
		<META charset="UTF-8">
		<LINK href="MyMenu002.css" rel="stylesheet">
		<META name="viewport" content="width=device-width, initial-scale=1.0">
		<TITLE>User access count</TITLE>
		<!--
		<LINK rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		-->
		<STYLE type='text/css'>
			.right-align
			{
				text-align: right !important;
			}
			.rectangle
			{
				position: relative;
				width: 50px;
				height: 50px;
				background-color: lightblue;
				border: 2px solid black;
				margin: 50px;
			}
			.arrow-top-left
			{
				position: absolute;
				top: 0;
				left: 0;
				width: 0;
				height: 0;
				border-left: 20px solid transparent;
				border-right: 20px solid transparent;
				border-bottom: 20px solid black;
			}
			.arrow-bottom-right
			{
				position: absolute;
				bottom: 0;
				right: 0;
				width: 0;
				height: 0;
				border-left: 20px solid transparent;
				border-top: 20px solid black;
				border-right: 20px solid transparent;
			}
			/* Styling the link */
			.link-style
			{
				color: orange;
				text-decoration: none; /* Removes underline */
				font-weight: bold; /* Optional: Makes it bold */
				cursor: pointer; /* Changes the cursor to a pointer when hovering */
			}
			.triangle
			{
				width: 0;
				height: 0;
				border-left: 25px solid transparent;
				border-right: 25px solid transparent;
				border-bottom: 50px solid #0071bb;
				position: relative;
			}
			.triangle-text
			{
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translateX(-50%); /* Adjusts to truly center the text */
				color: white;
				font-size: 30px;
				font-weight: bold;
			}
			.circle
			{
				width: 50px;
				height: 50px;
				background-color: #0071bb;
				border-radius: 50%;
				display: flex;
				justify-content: center;
				align-items: center;
				color: white;
				font-size: 30px;
				font-weight: bold;
			}
			body
			{
				font-family: Arial, sans-serif;
				margin: 0;
				padding: 0;
			}
			header
			{
				background-color: #0071bb;
				color: white;
				padding: 10px 0;
				text-align: center;
			}
			header h1
			{
				margin: 0;
			}
			nav
			{
				background-color: #f1f1f1;
				padding: 10px;
				display: flex;
				justify-content: center;
			}
			nav a
			{
				margin: 0 20px;
				text-decoration: none;
				color: #0071bb;
				font-weight: bold;
			}
			nav a:hover
			{
				color: #004f7c;
			}
			.icon-menu
			{
				display: flex;
				justify-content: space-around;
				padding: 20px;
				background-color: #f1f1f1;
			}
			.icon-menu div
			{
				text-align: center;
			}
			.icon-menu i
			{
				font-size: 40px;
				color: #0071bb;
			}
			.icon-menu div a
			{
				display: block;
				margin-top: 10px;
				color: #0071bb;
				font-weight: bold;
				text-decoration: none;
			}
			table
			{
				width: 100%;
				margin: 20px auto;
				border-collapse: collapse;
			}
		</STYLE>
	</HEAD>
	<BODY TOPMARGIN='0' LEFTMARGIN='0' MARGINHEIGHT='0' MARGINWIDTH='0'>
		<!-- HEADER -->
		<HEADER>
			<H1>Human-AI Financial Solutions = HAI FS</H1>
		</HEADER>
		<!-- Menu Bar -->
		<NAV>
			<SCRIPT type='text/javascript'>
				if( window.location.href.includes('index.html') )
				{
					document.write("<A><Font color='orange'>Home</FONT></A>");
				}
				else
				{
					document.write("<A href='index.html' class='link-style' href='/ExplorerPatcher-Exception-Windows-11-Home-Single-Language/spending.html' id='PreventWastagehref' style='color:blue'>Home</A>");
				}
				function showHomeTable()
				{
					const tamilhomeTable = document.getElementById('TamilHomeTable');
					const englishhomeTable = document.getElementById('EnglishHomeTable');
					const preventWastage = document.getElementById('PreventWastage');
					const categoryAmount = document.getElementById('CategoryAmountDetailsTab');
					preventWastage.style.display = 'none';
					categoryAmount.style.display = 'none';
					tamilhomeTable.style.display = 'table';
					englishhomeTable.style.display = 'table';
				}
			</SCRIPT>
	<A href='spending.html' class='link-style' id='PreventWastagehref' style='color:blue'>PreventWastage</A>
	<A href="save_money_and_lives.html">Save lives and money</A>
	<A href="ShareKnowledgeTransferToPeople.html"><U>ShareKnowledgeTransferToPeople</U></A>
	<A href="https://www.geocities.ws/murugesan/mis-interest.html">FinanceHelp</A>
	<A href='Visitor_count.html'>Visitor count</FONT></A>
	<A><FONT color='#556677'>Inprogress02</FONT></A>
	<A><FONT color='#556677'>Inprogress03</FONT></A>
		</NAV>

		<TABLE border='1'>
		<THEAD>
		<TR>
		<TH>User Count for https://murugesanopenssl.github.io/ExplorerPatcher-Exception-Windows-11-Home-Single-Language</TH>
		<TH>Country</TH>
		</TR>
		</THEAD>
		<TBODY id="tbody"></TBODY>
		</TABLE>
		<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "AIzaSyDSNanmji7WVBtQHlPO-J_E5RQu9Qlq4Qw",
    authDomain: "openmurugesan.firebaseapp.com",
    databaseURL: "https://openmurugesan-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "openmurugesan",
    storageBucket: "openmurugesan.firebasestorage.app",
    messagingSenderId: "307675598593",
    appId: "1:307675598593:web:4af163460ce2c3bc719500",
    measurementId: "G-0MFK92PQMP"
};
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const tbody = document.getElementById("tbody");

const id = "VISIT-" + Date.now();
const bow = navigator.userAgent;

const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
const ctry = (tz.includes("Kolkata") || tz.includes("Calcutta")) ? "INDIA" : "Since user changed time-zone manually/VPN/PROXY/custom OS/browser blocks locale<BR>Location: UNKNOWN";

set(ref(db, "userAccess/" + id), {
	browser: bow,
	country: ctry,
	timezone: tz,
	timestamp: Date.now()
});

onValue(ref(db, "userAccess"), snap => {
	tbody.innerHTML = "";
	let counts = {};

	snap.forEach(child => {
		let raw = child.val().country;
		let finalC = (raw === "INDIA") ? "INDIA" : "Since user changed time-zone manually/VPN/PROXY/custom OS/browser blocks locale<BR>Location: UNKNOWN";
		counts[finalC] = (counts[finalC] || 0) + 1;
	});

	Object.keys(counts).forEach(country => {
		tbody.innerHTML += `
		<tr>
			<td valign='top' align='right'>${String(counts[country]).padStart(4,"0")}</td>
			<td valign='top' align='right'>${country}</td>
		</tr>`;
	});
});
</script>
	</BODY>
</HTML>